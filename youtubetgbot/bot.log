2025-01-12 13:53:36,044 - INFO - Application started
2025-01-12 13:54:19,521 - INFO - Application started
2025-01-12 13:54:45,434 - INFO - Получение форматов для URL: https://www.youtube.com/watch?v=xmzdEP8Ubnc
2025-01-12 13:54:45,520 - INFO - Извлечение информации о видео...
2025-01-12 13:54:48,691 - INFO - Найдено 21 форматов
2025-01-12 13:54:48,692 - WARNING - Не найдено подходящих форматов, использую автоматический выбор
2025-01-12 13:54:48,692 - INFO - Итого доступно форматов: 1
2025-01-12 13:57:04,079 - INFO - Application started
2025-01-12 13:57:57,893 - INFO - Получение форматов для URL: https://www.youtube.com/watch?v=JGJYB4cZaE0
2025-01-12 13:57:58,012 - INFO - Извлечение информации о видео...
2025-01-12 13:57:59,685 - ERROR - Ошибка при получении форматов: 'NoneType' object is not subscriptable
2025-01-12 13:57:59,687 - ERROR - Traceback: Traceback (most recent call last):
  File "c:\Users\ASUS\Saved Games\Desktop\youtubetgbot\bot.py", line 57, in get_video_formats
    logger.info(f"Найдено {len(info['formats'])} форматов")
                               ~~~~^^^^^^^^^^^
TypeError: 'NoneType' object is not subscriptable

2025-01-12 13:58:10,173 - INFO - Начало загрузки видео: https://www.youtube.com/watch?v=JGJYB4cZaE0, формат: 22
2025-01-12 13:58:10,222 - INFO - Получение информации о видео...
2025-01-12 13:58:11,834 - ERROR - Ошибка при скачивании видео: 'NoneType' object has no attribute 'get'
2025-01-12 13:58:11,835 - ERROR - Traceback: Traceback (most recent call last):
  File "c:\Users\ASUS\Saved Games\Desktop\youtubetgbot\bot.py", line 136, in download_video
    duration = info.get('duration', 0)
               ^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'

2025-01-12 13:58:11,938 - ERROR - Download error: 'NoneType' object has no attribute 'get'
2025-01-12 14:02:48,996 - INFO - Application started
2025-01-12 14:03:19,246 - INFO - Получение форматов для URL: https://www.youtube.com/watch?v=JGJYB4cZaE0
2025-01-12 14:03:19,318 - INFO - Извлечение информации о видео...
2025-01-12 14:03:20,937 - ERROR - Ошибка при получении форматов: Не удалось получить информацию о видео
2025-01-12 14:03:20,938 - ERROR - Traceback: Traceback (most recent call last):
  File "c:\Users\ASUS\Saved Games\Desktop\youtubetgbot\bot.py", line 54, in get_video_formats
    raise Exception("Не удалось получить информацию о видео")
Exception: Не удалось получить информацию о видео

2025-01-12 14:03:25,032 - INFO - Начало загрузки видео: https://www.youtube.com/watch?v=JGJYB4cZaE0, формат: 18
2025-01-12 14:03:25,067 - INFO - Получение информации о видео...
2025-01-12 14:03:26,767 - ERROR - Ошибка при скачивании видео: Не удалось получить информацию о видео
2025-01-12 14:03:26,767 - ERROR - Traceback: Traceback (most recent call last):
  File "c:\Users\ASUS\Saved Games\Desktop\youtubetgbot\bot.py", line 125, in download_video
    raise Exception("Не удалось получить информацию о видео")
Exception: Не удалось получить информацию о видео

2025-01-12 14:03:26,944 - ERROR - Download error: Не удалось получить информацию о видео
2025-01-12 14:15:04,384 - INFO - Application started
2025-01-12 14:15:59,645 - INFO - Получение форматов для URL: https://www.youtube.com/watch?v=xmzdEP8Ubnc
2025-01-12 14:15:59,712 - INFO - Извлечение информации о видео...
2025-01-12 14:16:01,451 - ERROR - Ошибка при получении форматов: Не удалось получить информацию о видео
2025-01-12 14:16:01,452 - ERROR - Traceback: Traceback (most recent call last):
  File "c:\Users\ASUS\Saved Games\Desktop\youtubetgbot\bot.py", line 72, in get_video_formats
    raise Exception("Не удалось получить информацию о видео")
Exception: Не удалось получить информацию о видео

2025-01-12 14:16:03,644 - INFO - Начало загрузки видео: https://www.youtube.com/watch?v=xmzdEP8Ubnc, формат: 18
2025-01-12 14:16:03,678 - INFO - Получение информации о видео...
2025-01-12 14:16:06,115 - ERROR - Ошибка при скачивании видео: Не удалось получить информацию о видео
2025-01-12 14:16:06,115 - ERROR - Traceback: Traceback (most recent call last):
  File "c:\Users\ASUS\Saved Games\Desktop\youtubetgbot\bot.py", line 142, in download_video
    raise Exception("Не удалось получить информацию о видео")
Exception: Не удалось получить информацию о видео

2025-01-12 14:16:06,254 - ERROR - Download error: Не удалось получить информацию о видео
2025-01-12 14:24:54,333 - INFO - Application started
2025-01-12 14:24:57,638 - INFO - Application is stopping. This might take a moment.
2025-01-12 14:24:57,638 - INFO - Application.stop() complete
2025-01-12 14:25:21,298 - INFO - Application started
2025-01-12 14:25:36,715 - INFO - Получение форматов для URL: https://www.youtube.com/watch?v=JGJYB4cZaE0
2025-01-12 14:25:38,061 - INFO - Извлечение информации о видео...
2025-01-12 14:25:40,615 - ERROR - Ошибка при получении форматов: Не удалось получить информацию о видео
2025-01-12 14:25:40,616 - ERROR - Traceback: Traceback (most recent call last):
  File "c:\Users\ASUS\Saved Games\Desktop\youtubetgbot\bot.py", line 138, in get_video_formats
    raise Exception("Не удалось получить информацию о видео")
Exception: Не удалось получить информацию о видео

2025-01-12 14:25:43,198 - INFO - Начало загрузки видео: https://www.youtube.com/watch?v=JGJYB4cZaE0, формат: 18
2025-01-12 14:25:43,231 - INFO - Получение информации о видео...
2025-01-12 14:25:45,766 - ERROR - Ошибка при скачивании видео: Не удалось получить информацию о видео
2025-01-12 14:25:45,766 - ERROR - Traceback: Traceback (most recent call last):
  File "c:\Users\ASUS\Saved Games\Desktop\youtubetgbot\bot.py", line 223, in download_video
    raise Exception("Не удалось получить информацию о видео")
Exception: Не удалось получить информацию о видео

2025-01-12 14:25:45,887 - ERROR - Download error: Не удалось получить информацию о видео
2025-01-12 14:49:08,643 - INFO - Application started
2025-01-12 14:49:48,353 - INFO - Application is stopping. This might take a moment.
2025-01-12 14:49:48,353 - INFO - Application.stop() complete
2025-01-12 14:49:55,885 - INFO - Application started
2025-01-12 14:50:27,571 - INFO - Получение форматов для URL: https://www.youtube.com/watch?v=JGJYB4cZaE0
2025-01-12 14:50:28,120 - INFO - Извлечение информации о видео...
2025-01-12 14:50:30,668 - ERROR - Ошибка при получении форматов: Не удалось получить информацию о видео
2025-01-12 14:50:30,669 - ERROR - Traceback: Traceback (most recent call last):
  File "c:\Users\ASUS\Saved Games\Desktop\youtubetgbot\bot.py", line 143, in get_video_formats
    raise Exception("Не удалось получить информацию о видео")
Exception: Не удалось получить информацию о видео

2025-01-12 14:50:34,314 - INFO - Начало загрузки видео: https://www.youtube.com/watch?v=JGJYB4cZaE0, формат: 22
2025-01-12 14:50:34,352 - INFO - Получение информации о видео...
2025-01-12 14:50:36,895 - ERROR - Ошибка при скачивании: Не удалось получить информацию о видео
2025-01-12 14:50:39,439 - ERROR - Ошибка при скачивании видео: 'NoneType' object has no attribute 'setdefault'
2025-01-12 14:50:39,439 - ERROR - Traceback: Traceback (most recent call last):
  File "c:\Users\ASUS\Saved Games\Desktop\youtubetgbot\bot.py", line 225, in download_video
    raise Exception("Не удалось получить информацию о видео")
Exception: Не удалось получить информацию о видео

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\ASUS\Saved Games\Desktop\youtubetgbot\bot.py", line 247, in download_video
    filename = ydl2.prepare_filename(info)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\yt_dlp\YoutubeDL.py", line 1419, in prepare_filename
    filename = self._prepare_filename(info_dict, tmpl_type=dir_type, outtmpl=outtmpl)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\yt_dlp\YoutubeDL.py", line 1390, in _prepare_filename
    filename = self.evaluate_outtmpl(outtmpl, info_dict, True)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\yt_dlp\YoutubeDL.py", line 1381, in evaluate_outtmpl
    outtmpl, info_dict = self.prepare_outtmpl(outtmpl, info_dict, *args, **kwargs)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\yt_dlp\YoutubeDL.py", line 1163, in prepare_outtmpl
    info_dict.setdefault('epoch', int(time.time()))  # keep epoch consistent once set
    ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'setdefault'

2025-01-12 14:50:39,776 - ERROR - Download error: 'NoneType' object has no attribute 'setdefault'
2025-01-12 14:54:59,081 - INFO - Application started
2025-01-12 14:56:04,210 - INFO - Application started
2025-01-12 14:56:59,573 - INFO - Получение форматов для URL: https://www.youtube.com/watch?v=xmzdEP8Ubnc
2025-01-12 14:57:43,626 - WARNING - Не удалось получить рабочий прокси, пробуем без него
2025-01-12 14:57:43,695 - INFO - Извлечение информации о видео...
2025-01-12 14:57:47,037 - INFO - Найдено 42 форматов
2025-01-12 14:57:47,038 - WARNING - Не найдено подходящих форматов, пробуем другой прокси
2025-01-12 14:58:30,172 - WARNING - Не удалось получить рабочий прокси, пробуем без него
2025-01-12 14:58:30,208 - INFO - Извлечение информации о видео...
2025-01-12 14:58:33,061 - INFO - Найдено 42 форматов
2025-01-12 14:58:33,061 - WARNING - Не найдено подходящих форматов, пробуем другой прокси
2025-01-12 14:59:16,848 - WARNING - Не удалось получить рабочий прокси, пробуем без него
2025-01-12 14:59:16,883 - INFO - Извлечение информации о видео...
2025-01-12 14:59:19,717 - INFO - Найдено 42 форматов
2025-01-12 14:59:19,717 - WARNING - Не найдено подходящих форматов, пробуем другой прокси
2025-01-12 14:59:20,222 - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_application.py", line 1264, in process_update
    await coroutine
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_handlers\basehandler.py", line 157, in handle_update
    return await self.callback(update, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\ASUS\Saved Games\Desktop\youtubetgbot\bot.py", line 370, in button_click
    await query.answer()
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_callbackquery.py", line 187, in answer
    return await self.get_bot().answer_callback_query(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 900, in answer_callback_query
    return await super().answer_callback_query(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 542, in decorator
    result = await func(self, *args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 3767, in answer_callback_query
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 630, in _post
    return await self._do_post(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 347, in _do_post
    return await super()._do_post(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 658, in _do_post
    return await request.post(
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 200, in post
    result = await self._request_wrapper(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 379, in _request_wrapper
    raise BadRequest(message)
telegram.error.BadRequest: Query is too old and response timeout expired or query id is invalid
2025-01-12 14:59:20,366 - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_application.py", line 1264, in process_update
    await coroutine
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_handlers\basehandler.py", line 157, in handle_update
    return await self.callback(update, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\ASUS\Saved Games\Desktop\youtubetgbot\bot.py", line 370, in button_click
    await query.answer()
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_callbackquery.py", line 187, in answer
    return await self.get_bot().answer_callback_query(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 900, in answer_callback_query
    return await super().answer_callback_query(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 542, in decorator
    result = await func(self, *args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 3767, in answer_callback_query
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 630, in _post
    return await self._do_post(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 347, in _do_post
    return await super()._do_post(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 658, in _do_post
    return await request.post(
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 200, in post
    result = await self._request_wrapper(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 379, in _request_wrapper
    raise BadRequest(message)
telegram.error.BadRequest: Query is too old and response timeout expired or query id is invalid
2025-01-12 14:59:27,679 - INFO - Начало загрузки видео: https://www.youtube.com/watch?v=xmzdEP8Ubnc, формат: 18
2025-01-12 15:00:33,759 - INFO - Application started
2025-01-12 15:01:20,049 - ERROR - Error searching videos: [WinError 10060] Попытка установить соединение была безуспешной, т.к. от другого компьютера за требуемое время не получен нужный отклик, или было разорвано уже установленное соединение из-за неверного отклика уже подключенного компьютера
2025-01-12 15:10:24,598 - ERROR - Error while getting Updates: httpx.ReadError: 
2025-01-12 15:10:24,605 - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\httpx\_transports\default.py", line 67, in map_httpcore_exceptions
    yield
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\httpx\_transports\default.py", line 371, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\httpcore\_async\connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\httpcore\_async\http11.py", line 136, in handle_async_request
    raise exc
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\httpcore\_async\http11.py", line 106, in handle_async_request
    ) = await self._receive_response_headers(**kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\httpcore\_async\http11.py", line 177, in _receive_response_headers
    event = await self._receive_event(timeout=timeout)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\httpcore\_async\http11.py", line 217, in _receive_event
    data = await self._network_stream.read(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\httpcore\_backends\anyio.py", line 32, in read
    with map_exceptions(exc_map):
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ReadError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_httpxrequest.py", line 268, in do_request
    res = await self._client.request(
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\httpx\_client.py", line 1559, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\httpx\_client.py", line 1646, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\httpx\_client.py", line 1674, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\httpx\_client.py", line 1711, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\httpx\_client.py", line 1748, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\httpx\_transports\default.py", line 370, in handle_async_request
    with map_httpcore_exceptions():
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\httpx\_transports\default.py", line 84, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ReadError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 715, in _network_loop_retry
    if not await action_cb():
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 384, in polling_action_cb
    raise exc
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_updater.py", line 373, in polling_action_cb
    updates = await self.bot.get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 618, in get_updates
    updates = await super().get_updates(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 542, in decorator
    result = await func(self, *args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 4164, in get_updates
    await self._post(
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 630, in _post
    return await self._do_post(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 347, in _do_post
    return await super()._do_post(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 658, in _do_post
    return await request.post(
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 200, in post
    result = await self._request_wrapper(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 340, in _request_wrapper
    raise exc
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 330, in _request_wrapper
    code, payload = await self.do_request(
                    ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_httpxrequest.py", line 292, in do_request
    raise NetworkError(f"httpx.{err.__class__.__name__}: {err}") from err
telegram.error.NetworkError: httpx.ReadError: 
2025-01-12 15:25:54,366 - INFO - Application started
2025-01-12 15:26:22,415 - INFO - Получение форматов для URL: https://www.youtube.com/watch?v=xmzdEP8Ubnc
2025-01-12 15:26:37,416 - WARNING - Ошибка при проверке Tor прокси 91.193.18.155: 
2025-01-12 15:26:52,419 - WARNING - Ошибка при проверке Tor прокси 198.50.223.27: 
2025-01-12 15:27:07,447 - WARNING - Ошибка при проверке Tor прокси 135.125.66.100: 
2025-01-12 15:27:22,461 - WARNING - Ошибка при проверке Tor прокси 162.19.71.193: 
2025-01-12 15:27:24,482 - WARNING - Ошибка при проверке Tor прокси 127.0.0.1: SocksHTTPSConnectionPool(host='www.youtube.com', port=443): Max retries exceeded with url: / (Caused by NewConnectionError('<yt_dlp.networking._requests.SocksHTTPSConnection object at 0x0000017E73B1F110>: Failed to establish a new connection: [WinError 10061] Подключение не установлено, т.к. конечный компьютер отверг запрос на подключение'))
2025-01-12 15:27:25,902 - INFO - Добавлен рабочий Tor прокси: socks5h://127.0.0.1:9150
2025-01-12 15:27:25,902 - INFO - Обновлен список Tor прокси. Найдено 1 рабочих прокси
2025-01-12 15:27:25,904 - INFO - Используем прокси: socks5h://127.0.0.1:9150
2025-01-12 15:27:25,986 - INFO - Извлечение информации о видео...
2025-01-12 15:27:31,062 - INFO - Найдено 42 форматов
2025-01-12 15:27:31,666 - ERROR - No error handlers are registered, logging exception.
Traceback (most recent call last):
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_application.py", line 1264, in process_update
    await coroutine
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_handlers\basehandler.py", line 157, in handle_update
    return await self.callback(update, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\ASUS\Saved Games\Desktop\youtubetgbot\bot.py", line 409, in button_click
    await query.answer()
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_callbackquery.py", line 187, in answer
    return await self.get_bot().answer_callback_query(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 900, in answer_callback_query
    return await super().answer_callback_query(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 542, in decorator
    result = await func(self, *args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 3767, in answer_callback_query
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 630, in _post
    return await self._do_post(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_extbot.py", line 347, in _do_post
    return await super()._do_post(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\_bot.py", line 658, in _do_post
    return await request.post(
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 200, in post
    result = await self._request_wrapper(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ASUS\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\request\_baserequest.py", line 379, in _request_wrapper
    raise BadRequest(message)
telegram.error.BadRequest: Query is too old and response timeout expired or query id is invalid
2025-01-12 15:27:40,386 - INFO - Начало загрузки видео: https://www.youtube.com/watch?v=xmzdEP8Ubnc, формат: 22
2025-01-12 15:27:40,386 - INFO - Попытка 1 с прокси: socks5h://127.0.0.1:9150
2025-01-12 15:27:40,422 - INFO - Получение информации о видео...
2025-01-12 15:27:44,887 - ERROR - Ошибка при попытке 1: Не удалось получить информацию о видео
2025-01-12 15:27:44,887 - INFO - Попытка 2 с прокси: socks5h://127.0.0.1:9150
2025-01-12 15:27:44,922 - INFO - Получение информации о видео...
2025-01-12 15:27:49,989 - ERROR - Ошибка при попытке 2: Не удалось получить информацию о видео
2025-01-12 15:27:49,989 - INFO - Попытка 3 с прокси: socks5h://127.0.0.1:9150
2025-01-12 15:27:50,024 - INFO - Получение информации о видео...
2025-01-12 15:27:54,859 - ERROR - Ошибка при попытке 3: Не удалось получить информацию о видео
2025-01-12 15:27:54,860 - ERROR - Все попытки исчерпаны
2025-01-12 15:27:54,861 - ERROR - Traceback: Traceback (most recent call last):
  File "c:\Users\ASUS\Saved Games\Desktop\youtubetgbot\bot.py", line 298, in download_video
    raise Exception("Не удалось получить информацию о видео")
Exception: Не удалось получить информацию о видео

2025-01-12 15:27:55,152 - ERROR - Download error: Не удалось скачать видео после нескольких попыток
2025-01-12 15:39:01,381 - INFO - Application started
2025-01-12 15:39:08,504 - INFO - Application is stopping. This might take a moment.
2025-01-12 15:39:08,505 - INFO - Application.stop() complete
2025-01-12 15:39:13,052 - INFO - Application started
2025-01-12 15:39:31,472 - ERROR - Error searching videos: name 'VideosSearch' is not defined
2025-01-12 16:09:05,383 - INFO - Application started
2025-01-12 16:09:47,107 - INFO - Получение форматов для URL: https://www.youtube.com/watch?v=JGJYB4cZaE0
2025-01-12 16:09:48,003 - INFO - Прокси socks5h://127.0.0.1:9150 работает
2025-01-12 16:09:48,003 - INFO - Используем прокси: socks5h://127.0.0.1:9150
2025-01-12 16:09:48,075 - INFO - Извлечение информации о видео...
2025-01-12 16:09:52,655 - INFO - Найдено 48 форматов
2025-01-12 16:09:52,655 - INFO - Добавлен формат: 18 (360p, 10.2MB)
2025-01-12 16:09:58,989 - INFO - Начало загрузки видео: https://www.youtube.com/watch?v=JGJYB4cZaE0, формат: 18
2025-01-12 16:09:58,990 - INFO - Попытка 1 с прокси: socks5h://127.0.0.1:9150
2025-01-12 16:10:03,829 - INFO - Начинаем загрузку видео...
2025-01-12 16:10:17,206 - INFO - Application is stopping. This might take a moment.
2025-01-12 16:10:17,207 - INFO - Application.stop() complete
2025-01-12 16:11:46,630 - INFO - Application started
2025-01-12 16:11:59,919 - INFO - Получение форматов для URL: https://www.youtube.com/watch?v=yMKnqPLRESE
2025-01-12 16:12:00,619 - INFO - Прокси socks5h://127.0.0.1:9150 работает
2025-01-12 16:12:00,619 - INFO - Используем прокси: socks5h://127.0.0.1:9150
2025-01-12 16:12:00,688 - INFO - Извлечение информации о видео...
2025-01-12 16:12:04,704 - INFO - Найдено 50 форматов
2025-01-12 16:12:04,704 - INFO - Добавлен формат: 18 (640p, 1.1MB)
2025-01-12 16:12:11,115 - INFO - Начало загрузки видео: https://www.youtube.com/watch?v=yMKnqPLRESE, формат: 18
2025-01-12 16:12:11,116 - INFO - Попытка 1 с прокси: socks5h://127.0.0.1:9150
2025-01-12 16:12:15,511 - INFO - Начинаем загрузку видео...
